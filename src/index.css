@tailwind base;
@tailwind components;
@tailwind utilities;

/* ─── Dracula Design Tokens ─────────────────────────────────────────────── */
:root {
  /* Palette */
  --bg:           #282A36;
  --current-line: #44475A;
  --foreground:   #F8F8F2;
  --comment:      #6272A4;
  --cyan:         #8BE9FD;
  --green:        #50FA7B;
  --orange:       #FFB86C;
  --pink:         #FF79C6;
  --purple:       #BD93F9;
  --red:          #FF5555;
  --yellow:       #F1FA8C;

  /* Typography */
  --font-pixel: "Press Start 2P", monospace;
  --font-mono:  "JetBrains Mono", monospace;
  --font-vt:    "VT323", monospace;

  /* Spacing rhythm */
  --space-xs:  4px;
  --space-sm:  8px;
  --space-md:  16px;
  --space-lg:  24px;
  --space-xl:  40px;
  --space-2xl: 64px;

  /* Transition */
  --transition-fast:   150ms ease;
  --transition-normal: 200ms ease;

  /* Glow intensities */
  --glow-purple: 0 0 12px rgba(189, 147, 249, 0.5);
  --glow-cyan:   0 0 12px rgba(139, 233, 253, 0.5);
  --glow-green:  0 0 12px rgba(80, 250, 123, 0.5);

  /* Pixel border */
  --pixel-border: 2px 2px 0 var(--comment);
}

/* ─── Base Layer ─────────────────────────────────────────────────────────── */
@layer base {
  html {
    background-color: var(--bg);
    color: var(--foreground);
    font-family: var(--font-mono);
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  body {
    background-color: var(--bg);
    min-height: 100vh;
    /* Subtle noise texture via SVG data URI */
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='0.04'/%3E%3C/svg%3E");
    background-repeat: repeat;
    background-size: 200px 200px;
  }

  * {
    box-sizing: border-box;
  }

  /* Reset heading font — components choose font-pixel explicitly */
  h1, h2, h3, h4, h5, h6 {
    font-family: var(--font-pixel);
    color: var(--foreground);
  }

  /* Scrollbar styling */
  ::-webkit-scrollbar {
    width: 6px;
    height: 6px;
  }
  ::-webkit-scrollbar-track {
    background: var(--bg);
  }
  ::-webkit-scrollbar-thumb {
    background: var(--comment);
    border-radius: 0;
  }
  ::-webkit-scrollbar-thumb:hover {
    background: var(--purple);
  }

  /* Selection */
  ::selection {
    background: var(--purple);
    color: var(--bg);
  }
}

/* ─── Component Layer ────────────────────────────────────────────────────── */
@layer components {
  /* Pixel card — elevated surface with pixel-border shadow */
  .pixel-card {
    background-color: var(--current-line);
    border: 1px solid var(--comment);
    border-radius: 4px;
    box-shadow: var(--pixel-border);
    transition: box-shadow var(--transition-fast), border-color var(--transition-fast);
  }

  .pixel-card:hover {
    border-color: var(--purple);
    box-shadow: 2px 2px 0 var(--purple), var(--glow-purple);
  }

  /* Primary CTA button (green) */
  .btn-primary {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: var(--space-sm);
    padding: 10px 20px;
    background-color: transparent;
    border: 2px solid var(--green);
    color: var(--green);
    font-family: var(--font-pixel);
    font-size: 10px;
    border-radius: 2px;
    cursor: pointer;
    transition:
      background-color var(--transition-fast),
      box-shadow var(--transition-fast),
      color var(--transition-fast);
  }

  .btn-primary:hover {
    background-color: var(--green);
    color: var(--bg);
    box-shadow: var(--glow-green);
  }

  .btn-primary:disabled {
    opacity: 0.4;
    cursor: not-allowed;
  }

  /* Secondary button (purple) */
  .btn-secondary {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: var(--space-sm);
    padding: 10px 20px;
    background-color: transparent;
    border: 2px solid var(--purple);
    color: var(--purple);
    font-family: var(--font-pixel);
    font-size: 10px;
    border-radius: 2px;
    cursor: pointer;
    transition:
      background-color var(--transition-fast),
      box-shadow var(--transition-fast),
      color var(--transition-fast);
  }

  .btn-secondary:hover {
    background-color: var(--purple);
    color: var(--bg);
    box-shadow: var(--glow-purple);
  }

  /* Input field with terminal focus */
  .pixel-input {
    width: 100%;
    background-color: var(--bg);
    border: 1px solid var(--comment);
    border-radius: 2px;
    color: var(--foreground);
    font-family: var(--font-mono);
    font-size: 14px;
    padding: 10px 12px;
    outline: none;
    transition:
      border-color var(--transition-fast),
      box-shadow var(--transition-fast);
    caret-color: var(--purple);
  }

  .pixel-input:focus {
    border-color: var(--purple);
    box-shadow: var(--glow-purple);
  }

  .pixel-input::placeholder {
    color: var(--comment);
    font-style: italic;
  }

  /* Retro progress bar segment */
  .progress-segment {
    height: 12px;
    background-color: var(--current-line);
    border: 1px solid var(--comment);
    flex: 1;
    transition: background-color var(--transition-fast);
  }

  .progress-segment.filled {
    background-color: var(--cyan);
    box-shadow: var(--glow-cyan);
  }

  .progress-segment.active {
    background-color: var(--purple);
    box-shadow: var(--glow-purple);
    animation: glowPulse 2s ease-in-out infinite;
  }
}

/* ─── Utilities Layer ────────────────────────────────────────────────────── */
@layer utilities {
  /* CRT Scanline overlay — applied to a fixed div rendered globally */
  .scanlines::before {
    content: '';
    position: fixed;
    inset: 0;
    background: repeating-linear-gradient(
      0deg,
      transparent,
      transparent 2px,
      rgba(0, 0, 0, 0.03) 2px,
      rgba(0, 0, 0, 0.03) 4px
    );
    pointer-events: none;
    z-index: 9999;
  }

  /* Glow text utilities */
  .glow-purple { text-shadow: 0 0 10px rgba(189, 147, 249, 0.7); }
  .glow-cyan   { text-shadow: 0 0 10px rgba(139, 233, 253, 0.7); }
  .glow-green  { text-shadow: 0 0 10px rgba(80, 250, 123, 0.7); }
  .glow-pink   { text-shadow: 0 0 10px rgba(255, 121, 198, 0.7); }
  .glow-yellow { text-shadow: 0 0 10px rgba(241, 250, 140, 0.7); }

  /* Pixel border shorthand */
  .pixel-border {
    box-shadow: var(--pixel-border);
  }

  /* VT323 accent label */
  .vt-label {
    font-family: var(--font-vt);
    font-size: 18px;
    letter-spacing: 0.05em;
  }
}

/* ─── Global Keyframes ───────────────────────────────────────────────────── */
@keyframes blink {
  0%, 100% { opacity: 1; }
  50%       { opacity: 0; }
}

@keyframes ascii-decay {
  0%   { opacity: 1; transform: translateY(0)    scale(1);   }
  100% { opacity: 0; transform: translateY(-10px) scale(0.5); }
}

@keyframes glowPulse {
  0%, 100% { box-shadow: 0 0 8px rgba(189, 147, 249, 0.4); }
  50%       { box-shadow: 0 0 20px rgba(189, 147, 249, 0.8); }
}

@keyframes scanMove {
  0%   { transform: translateY(-100%); }
  100% { transform: translateY(100vh); }
}

/* Blinking cursor — used by BlinkingCursor component */
.cursor-blink {
  display: inline-block;
  width: 10px;
  height: 1em;
  background-color: var(--purple);
  vertical-align: text-bottom;
  animation: blink 1s step-end infinite;
}

/* Terminal-style moving scan line (subtle, decorative) */
.scan-line {
  position: fixed;
  left: 0;
  right: 0;
  height: 2px;
  background: linear-gradient(transparent, rgba(139, 233, 253, 0.05), transparent);
  pointer-events: none;
  z-index: 9998;
  animation: scanMove 8s linear infinite;
}
